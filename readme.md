# K33N RP Identity and Access Management
This app is currently used to automate identity and access management for the K33N RP GTA V FiveM servers. It integrates with Discord as the system of record for access.

## Features:
- Single sign-on using Discord
- RESTful API
- Customizable JSON-defined forms with HTML rich descriptions and access control
- Automatic user notification via direct message, defined with customizable HTML
- Form moderation and approval voting process, including denial messages
- Automatic Discord role assignment upon application approval
- Ability to view completed forms
- Discord webhook for new form submission notifications
- Exposes API endpoints for server authorization

## Technology Stack
- Node.js and Express back-end
- MySQL database
- HTML/CSS/JS web client without any fancy JS frameworks

## Quick Start
1. Import `rp_iam.sql` into MySQL server
2. Create an application at [Discord's developer portal](https://discord.com/developers/applications)
3. Copy `config-example.json` to `~/k33n-rp-iam.json` and set values appropriately
4. Create an `emails` directory to define email templates, using the examples in the `emails-example` directory.
5. Define forms in the `forms` database table
6. Create a `forms` directory to define form templates, using the examples in the `forms-example` directory.
7. Front-end server with an SSL reverse proxy
8. Modify the OAuth URL in `index.htm` to the one generated by Discord with the `identify`, `guilds`, and `guilds.join` scopes
9. Add the service as a `systemd` unit for auto-start on boot and start it
10. Visit `<baseUrl>/index.htm` in a web browser to see the fruits of your labor.
11. Maybe more; I haven't tested these instructions!

## To Do
- Server-sided validation of required form fields being present
- Warn/ban support
- Callback cleanup
- Streamlined setup
- Better readme with configuration descriptions